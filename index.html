<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Skills Tracker</title>
</head>
<body>

</body>
    <main>
        <ul id="list">
        </ul>
        <form id="myform" action="#" onsubmit="return populateFieldsOnSubmit(this)">
            <input type="text" name="name">
            <button type="submit">Submit</button>
        </form>
    </main>
    <script>
        // this stops the form from refreshing the page after being submitted
        document.getElementById('myform').addEventListener('submit', (e) => e.preventDefault());

        // TODO: sanitise input
        // TODO: make sure duplicate skills are not allowed on list

        // this function takes form inputs and manipulates the dom with them
        const populateFieldsOnSubmit = (formElement) => {
            const skillName = formElement.name.value;
            createListItem(skillName);
        }

        const deleteListItem = (formElement) => {
            formElement.remove()
        }

        const getIdFromUserInput = (userInput) => userInput
            .toLowerCase()
            .replaceAll(/\W/g, '');

        const createListItem = (skillName) => {
            const ul = document.getElementById('list');
            const li = document.createElement('li');

            const skillId = getIdFromUserInput(skillName);
            const removeSkillButton = document.createElement('button');
            const skillSpan = document.createElement('span');

            removeSkillButton.addEventListener('click', event => document.getElementById(skillId).remove())

            removeSkillButton.appendChild(document.createTextNode('-'))
            skillSpan.appendChild(document.createTextNode(skillName));
            li.setAttribute('id', skillId);
            li.appendChild(skillSpan);
            li.appendChild(removeSkillButton);
            ul.appendChild(li);
        }

    </script>
</html>